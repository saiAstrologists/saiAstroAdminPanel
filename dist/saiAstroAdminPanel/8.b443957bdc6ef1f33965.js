(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{F4UR:function(t,e,o){"use strict";o.r(e),o.d(e,"LoginModule",(function(){return O}));var n=o("ofXK"),i=o("tyNb"),a=o("3Pt+"),r=function(t){return t[t.masterAdmin=0]="masterAdmin",t[t.subAdmin=1]="subAdmin",t}({}),s=o("9fUO"),c=o("fXoL"),d=o("dixg"),l=o("KABp"),g=o("/eBy");let m=(()=>{class t{constructor(t){this.restService=t}loginUser(t){return this.restService.create(l.a.login,t)}forgotPassword(t){return this.restService.create(l.a.forgotPswd,t)}verifyMobotp(t){return this.restService.create(l.a.verifyotp,t)}resetLoginPassword(t){return this.restService.create(l.a.resetPassword,t)}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(g.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=o("Wp6s"),p=o("kmnG"),u=o("qFsG"),f=o("NFeN"),w=o("MUNV"),h=o("bTqV");function P(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"div",12),c.Tb(2,"mat-form-field"),c.Tb(3,"mat-label"),c.Bc(4,"Mobile No"),c.Sb(),c.Ob(5,"input",13),c.Tb(6,"mat-icon",14),c.Bc(7,"phone"),c.Sb(),c.Sb(),c.Ob(8,"app-errorcontrol-message",15),c.Sb(),c.Tb(9,"div",12),c.Tb(10,"mat-form-field"),c.Tb(11,"mat-label"),c.Bc(12,"Password"),c.Sb(),c.Ob(13,"input",16),c.Tb(14,"mat-icon",14),c.Bc(15,"vpn_key"),c.Sb(),c.Sb(),c.Ob(16,"app-errorcontrol-message",15),c.Sb(),c.Tb(17,"div",17),c.Tb(18,"div",18),c.Tb(19,"span",19),c.ac("click",(function(){return c.rc(t),c.ec().forgotPswdSec()})),c.Bc(20,"Forgot Password ?"),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",20),c.Tb(22,"button",21),c.ac("click",(function(){c.rc(t);const e=c.ec();return e.submitForm(e.adminLogin)})),c.Bc(23,"Login"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.ec();c.Bb(5),c.jc("maxLength",t.mobileMax),c.Bb(3),c.jc("control",t.adminLogin.get("username"))("controlName","Username"),c.Bb(8),c.jc("control",t.adminLogin.get("password"))("controlName","Password"),c.Bb(6),c.jc("disabled",t.adminLogin.invalid)}}function v(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"div",22),c.Tb(2,"button",23),c.ac("click",(function(){return c.rc(t),c.ec().forgotPswdSec()})),c.Tb(3,"mat-icon"),c.Bc(4,"keyboard_arrow_left"),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"div",12),c.Tb(6,"mat-form-field"),c.Tb(7,"mat-label"),c.Bc(8,"Mobile No"),c.Sb(),c.Ob(9,"input",24),c.Tb(10,"mat-icon",14),c.Bc(11,"phone"),c.Sb(),c.Sb(),c.Ob(12,"app-errorcontrol-message",15),c.Sb(),c.Tb(13,"div",12),c.Tb(14,"mat-form-field"),c.Tb(15,"mat-label"),c.Bc(16,"OTP"),c.Sb(),c.Ob(17,"input",25),c.Tb(18,"mat-icon",14),c.Bc(19,"perm_phone_msg"),c.Sb(),c.Sb(),c.Ob(20,"app-errorcontrol-message",26),c.Sb(),c.Tb(21,"div",20),c.Tb(22,"button",21),c.ac("click",(function(){c.rc(t);const e=c.ec();return e.isOtpFill?e.verifyMobileOtp(e.adminLogin):e.forgotPassword(e.adminLogin)})),c.Bc(23),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.ec();c.Bb(9),c.jc("maxLength",t.mobileMax),c.Bb(3),c.jc("control",t.adminLogin.get("forgotMobileno"))("controlName","Mobile No"),c.Bb(8),c.jc("control",t.adminLogin.get("otp"))("controlName","Otp")("maxLength",t.otpMax),c.Bb(2),c.jc("disabled",t.adminLogin.invalid),c.Bb(1),c.Dc("",t.isOtpFill?"Verify":"Get"," OTP")}}function S(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",27),c.Tb(1,"div",22),c.Tb(2,"button",23),c.ac("click",(function(){return c.rc(t),c.ec().resetPswdSec()})),c.Tb(3,"mat-icon"),c.Bc(4,"keyboard_arrow_left"),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"div",12),c.Tb(6,"mat-form-field"),c.Tb(7,"mat-label"),c.Bc(8,"Password"),c.Sb(),c.Tb(9,"input",28),c.ac("focusout",(function(e){return c.rc(t),c.ec().passwordResetCheck(e)})),c.Sb(),c.Tb(10,"mat-icon",14),c.Bc(11,"vpn_key"),c.Sb(),c.Sb(),c.Ob(12,"app-errorcontrol-message",15),c.Sb(),c.Tb(13,"div",12),c.Tb(14,"mat-form-field"),c.Tb(15,"mat-label"),c.Bc(16,"Confirm Password"),c.Sb(),c.Tb(17,"input",29),c.ac("focustout",(function(e){return c.rc(t),c.ec().confirmResetCheck(e)})),c.Sb(),c.Tb(18,"mat-icon",14),c.Bc(19,"vpn_key"),c.Sb(),c.Sb(),c.Ob(20,"app-errorcontrol-message",15),c.Sb(),c.Tb(21,"div",20),c.Tb(22,"button",21),c.ac("click",(function(){c.rc(t);const e=c.ec();return e.setResetPassword(e.adminLogin)})),c.Bc(23,"Reset Password"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.ec();c.Bb(12),c.jc("control",t.adminLogin.get("resetPassword"))("controlName","Reset Password"),c.Bb(8),c.jc("control",t.adminLogin.get("resetConfirmPassword"))("controlName","Confirm Password"),c.Bb(2),c.jc("disabled",t.adminLogin.invalid)}}const M=[{path:"",component:(()=>{class t{constructor(t,e,o){this.router=t,this.commonService=e,this.loginService=o,this.viewForgetPswdSec=!1,this.viewResetPswdSec=!1,this.isOtpFill=!1,this.mobileMax=10,this.otpMax=6}ngOnInit(){this.adminLogin=new a.f({username:new a.d("",[a.q.required,s.a.mobileNoValidation]),password:new a.d("",[a.q.required]),forgotMobileno:new a.d("",[]),otp:new a.d("",[]),resetMobileno:new a.d("",[]),resetPassword:new a.d("",[]),resetConfirmPassword:new a.d("",[])}),this.adminLogin.get("otp").disable()}forgotPswdSec(){this.viewForgetPswdSec=!this.viewForgetPswdSec,this.adminLogin.reset(),this.viewForgetPswdSec?(this.adminLogin.get("otp").disable(),this.adminLogin.get("username").setValidators([]),this.adminLogin.get("password").setValidators([]),this.adminLogin.get("forgotMobileno").setValidators([a.q.required,s.a.mobileNoValidation]),this.adminLogin.get("otp").setValidators([])):(this.adminLogin.get("username").setValidators([a.q.required,s.a.mobileNoValidation]),this.adminLogin.get("password").setValidators([a.q.required]),this.adminLogin.get("forgotMobileno").setValidators([]),this.adminLogin.get("otp").setValidators([])),this.adminLogin.get("username").updateValueAndValidity(),this.adminLogin.get("password").updateValueAndValidity(),this.adminLogin.get("forgotMobileno").updateValueAndValidity(),this.adminLogin.get("otp").updateValueAndValidity()}resetPswdSec(){this.viewResetPswdSec=!this.viewResetPswdSec,this.adminLogin.get("username").reset(),this.adminLogin.get("password").reset(),this.adminLogin.get("resetPassword").reset(),this.adminLogin.get("resetConfirmPassword").reset(),this.viewResetPswdSec?(this.adminLogin.get("username").setValidators([]),this.adminLogin.get("password").setValidators([]),this.adminLogin.get("resetMobileno").setValidators([a.q.required]),this.adminLogin.get("resetPassword").setValidators([a.q.required,s.a.passwordValidation]),this.adminLogin.get("resetConfirmPassword").setValidators([a.q.required,s.a.passwordValidation])):(this.adminLogin.get("username").setValidators([a.q.required,s.a.mobileNoValidation]),this.adminLogin.get("password").setValidators([a.q.required]),this.adminLogin.get("resetMobileno").setValidators([]),this.adminLogin.get("resetPassword").setValidators([]),this.adminLogin.get("resetConfirmPassword").setValidators([])),this.adminLogin.get("username").updateValueAndValidity(),this.adminLogin.get("password").updateValueAndValidity(),this.adminLogin.get("resetMobileno").updateValueAndValidity(),this.adminLogin.get("resetPassword").updateValueAndValidity(),this.adminLogin.get("resetConfirmPassword").updateValueAndValidity()}submitForm(t){t.valid&&this.loginService.loginUser({contactNo:t.value.username,password:t.value.password}).subscribe(t=>{console.log(t,"response"),t&&t.data&&t.data.token&&(sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("user_role",JSON.stringify(t.data.userData)),t.data.userData&&t.data.userData.userType==r.masterAdmin?sessionStorage.setItem("adminType","master"):sessionStorage.setItem("adminType","subadmin"),this.commonService.setUserLoginStatus(!0),this.router.navigate(["dashboard"]))})}forgotPassword(t){t&&t.valid&&t.value.forgotMobileno&&this.loginService.forgotPassword({contactNo:t.value.forgotMobileno}).subscribe(t=>{t&&t.data&&t.data.otp&&(this.isOtpFill=!0,console.log(this.adminLogin,"form"),this.adminLogin.get("otp").enable(),this.adminLogin.get("otp").setValidators([a.q.required]),this.adminLogin.get("otp").updateValueAndValidity())})}verifyMobileOtp(t){t&&t.valid&&t.value.forgotMobileno&&t.value.otp&&this.loginService.verifyMobotp({contactNo:t.value.forgotMobileno,otp:t.value.otp}).subscribe(e=>{e&&200==e.status&&(console.log("verified"),this.viewForgetPswdSec=!1,this.adminLogin.patchValue({resetMobileno:t.value.forgotMobileno}),this.resetPswdSec())})}passwordResetCheck(t){console.log(t,"veen"),this.adminLogin.get("resetConfirmPassword").setValidators([a.q.required,s.a.passwordValidation,s.a.confirmPswdValidaiton]),this.adminLogin.get("resetConfirmPassword").updateValueAndValidity()}confirmResetCheck(t){console.log(t,"veen"),t.target.value!=this.adminLogin.get("resetPassword").value&&(this.adminLogin.get("resetConfirmPassword").setValidators([a.q.required,s.a.passwordValidation,s.a.confirmPswdValidaiton]),this.adminLogin.get("resetConfirmPassword").updateValueAndValidity())}setResetPassword(t){t&&t.valid&&this.loginService.resetLoginPassword({contactNo:t.value.resetMobileno,password:t.value.resetConfirmPassword}).subscribe(t=>{t&&200==t.status&&(this.viewResetPswdSec=!0,this.resetPswdSec())})}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(i.b),c.Nb(d.a),c.Nb(m))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-login"]],decls:15,vars:5,consts:[[1,"login-container"],[1,"login-img-sec"],[1,"container"],[1,"row","justify-content-center","align-items-center"],[1,"col-5","login-col"],[3,"formGroup"],[1,"pb-5"],[1,"logo-view","mt-4","mb-5","text-center"],["src","../../../admin/assets/imgs/sai-logo.png","alt","","width","220px",1,"img-fluid"],[1,"text-center"],[4,"ngIf"],["class","reset-password-sec",4,"ngIf"],[1,"form-field-wrapper"],["matInput","","placeholder","","type","text","formControlName","username",3,"maxLength"],["matPrefix","",1,"mr-2"],[3,"control","controlName"],["matInput","","placeholder","","type","password","formControlName","password"],[1,"clearfix","reset-frgt"],[1,"float-right","forgot-pswd"],[3,"click"],[1,"mt-5","text-center"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"text-left","back-btn"],["mat-mini-fab","","color","accent","aria-label","Example icon button with a menu icon",3,"click"],["matInput","","placeholder","","type","text","formControlName","forgotMobileno",3,"maxLength"],["matInput","","placeholder","","type","text","formControlName","otp"],[3,"control","controlName","maxLength"],[1,"reset-password-sec"],["matInput","","placeholder","","type","password","formControlName","resetPassword",3,"focusout"],["matInput","","placeholder","","type","password","formControlName","resetConfirmPassword",3,"focustout"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Ob(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"form",5),c.Tb(6,"mat-card",6),c.Tb(7,"div",7),c.Ob(8,"img",8),c.Sb(),c.Tb(9,"mat-card-title",9),c.Tb(10,"span"),c.Bc(11),c.Sb(),c.Sb(),c.Ac(12,P,24,6,"div",10),c.Ac(13,v,24,8,"div",10),c.Ac(14,S,24,5,"div",11),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(5),c.jc("formGroup",e.adminLogin),c.Bb(6),c.Cc(e.viewForgetPswdSec?"Forgot Password":e.viewResetPswdSec?"Reset Password":"Login"),c.Bb(1),c.jc("ngIf",!(e.viewForgetPswdSec||e.viewResetPswdSec)),c.Bb(1),c.jc("ngIf",e.viewForgetPswdSec),c.Bb(1),c.jc("ngIf",e.viewResetPswdSec))},directives:[a.r,a.n,a.g,b.a,b.c,n.l,p.b,p.e,u.b,a.c,a.m,a.e,f.a,p.f,w.a,h.a],styles:[".login-container[_ngcontent-%COMP%]{height:100vh;position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]   .login-img-sec[_ngcontent-%COMP%]{width:100%;height:100%;background:url(banner-new.25ef487f464c89d5c09c.jpg) 50% 50%;position:absolute}.login-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{height:100%}.login-container[_ngcontent-%COMP%]   .login-col[_ngcontent-%COMP%]{min-width:445px}.login-container[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]{width:250px;margin:25px auto 0}.login-container[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]     .mat-input-element{height:18px}.login-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:250px}.login-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:-4px}.login-container[_ngcontent-%COMP%]   .reset-frgt[_ngcontent-%COMP%]{width:250px;margin:0 auto}.login-container[_ngcontent-%COMP%]   .reset-frgt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;cursor:pointer}.login-container[_ngcontent-%COMP%]   .reset-frgt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#f9a825}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative}.login-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{position:absolute;top:45px}.login-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]     .mat-mini-fab .mat-button-wrapper{line-height:21px}.login-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{min-height:440px;background-color:hsla(0,0%,100%,.95)}.login-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-weight:700;letter-spacing:2px;margin-bottom:35px}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}@media only screen and (max-width:575px){.login-container[_ngcontent-%COMP%]   .login-col[_ngcontent-%COMP%]{min-width:auto;max-width:100%;flex:1}.logo-view[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.mat-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}}"]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[i.d.forChild(M)],i.d]}),t})();var C=o("ujDJ");let O=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[n.c,L,C.a]]}),t})()}}]);